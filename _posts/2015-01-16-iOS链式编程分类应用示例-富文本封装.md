---
layout: post
title: iOS链式编程分类应用示例-富文本封装
date: 2015-01-16
tags: 链式编程
---
### 给富文本`NSMutableAttributedString`扩展分类,添加自己封装的方法
```swift
NS_ASSUME_NONNULL_BEGIN

@interface NSMutableAttributedString (Ext)

- (instancetype)stringAppendString:(NSString *)string withAttr:(NSDictionary *)attr;
+ (instancetype)stringAppendString:(NSString *)string withAttr:(NSDictionary *)attr;

@end

NS_ASSUME_NONNULL_END
```

```swift

#import "NSMutableAttributedString+Ext.h"

@implementation NSMutableAttributedString (Ext)

+ (instancetype)stringAppendString:(NSString *)string withAttr:(NSDictionary *)attr {
    NSMutableAttributedString *aString = [[NSMutableAttributedString alloc] init];
    [aString stringAppendString:string withAttr:attr];
    return aString;
}

- (instancetype)stringAppendString:(NSString *)string withAttr:(NSDictionary *)attr {
    
    if (attr == nil) {
        attr = @{};
    }
    if (string && string.length) {
        NSMutableAttributedString *multableAttrString = [[NSMutableAttributedString alloc] initWithString:string];
        [multableAttrString setAttributes:attr range:NSMakeRange(0, string.length)];
        [self appendAttributedString:multableAttrString];
    }
    return self;
}
@end
```

### 使用示例:
```swift
- (void)viewDidLoad {
    [super viewDidLoad];

    NSMutableAttributedString *attr1 = [NSMutableAttributedString stringAppendString:@"船长" withAttr:@{NSForegroundColorAttributeName : [UIColor redColor]}];
    NSMutableAttributedString *attr2 = [attr1 stringAppendString:@"学习录" withAttr:@{NSForegroundColorAttributeName : [UIColor blueColor]}];
    self.label.attributedText = attr2;
}
```
![demo]({{ "/assets/img/label.png" | absolute_url }})
