---
layout: post
title: Runtime之方法调用本质面试题
date: 2015-07-13
tags: Runtime
---

面试题如下
```swift
@interface DXPerson : NSObject
@property (copy, nonatomic) NSString *name;

- (void)print;
@end
// ----------分割线----------
@implementation DXPerson

- (void)print{
    NSLog(@"my name is %@", self->_name);
}
@end
```
1.编译能否通过?
2.如果能通过,打印结果是什么?
```swift
- (void)viewDidLoad {
    [super viewDidLoad];

    id cls = [DXPerson class];
    void *obj = &cls;
    [(__bridge id)obj print];
```

### 打印结果
```swift
my name is <ViewController: 0x7f8ba1f1a300>
```

复习以前的知识
### 对象的isa指针指向哪里?
- instance对象的isa指向class对象
- class对象的isa指向meta-class对象
- meta-class对象的isa指向基类的meta-class对象


### Objective-C对象的本质
```swift
@interface Student : NSObject{
    int _no;
    int _age;
}
struct Student_IMPL {
    struct NSObject_IMPL NSObject_IVARS;
    int _no;
    int _age;
}

struct NSObject_IMPL {
    Class isa;
}

```
因此归根结底:
```swift
struct Student_IMPL {
    Class isa;
    int _no;
    int _age;
}
```
![demo]({{ "/assets/img/person_isa.jpeg" | absolute_url }})

