---
layout: post
title: 安卓_Handler延时/定时任务
date: 2020-04-11
tags: 安卓
---
1.倒计时三秒后做任务
```java
private  HandlerThread handlerThread;
private Handler mHander;

Runnable delayDo = new Runnable() {
    @Override
    public void run() {
        Log.d("ldx",Thread.currentThread()+""); //Thread[HandlerThread,5,main]
        Log.d("ldx", "当前线程是不是主线程"+(Looper.getMainLooper().getThread() == Thread.currentThread()));
        Log.d("ldx", "延迟3秒后做这个事情");
        
        // 定时任务,每秒执行delayDo
        mHander.postDelayed(delayDo, 1*1000);
    }
};

// 子线程做任务
HandlerThread handlerThread = new HandlerThread("HandlerThread");
handlerThread.start();
Handler hander = new Handler(handlerThread.getLooper());

// 主线程做任务
mHander = new Handler(Looper.getMainLooper());
mHander.postDelayed(delayDo, 3*1000);

// 不用的时候,需要手动销毁
@Override
protected void onDestroy() {
    super.onDestroy();

    handlerThread.quit();
}
```

