---
layout: post
title: Swift之字面量和字面量协议
date: 2019-03-14
tags: Swift
---

### 一.字面量(Literal)
```swift
var age = 10
var isRed = false
var name = "Jack"
```
上面代码中的10,false,"Jack"就是字面量

Swift自带的绝大部分类型,都支持直接通过字面量进行初始化
```swift
Bool Int Float Double String Array Dictionary Set Optional等
```

### 二.字面量协议
Swift自带类型之所以能够通过字面量初始化,是因为它们遵守了对应的协议

>Expressible: 可表达的
Literal: 字面意义的,字面值;
```swift
Bool: ExpressibleByBooleanLiteral
Int: ExpressibleByIntergerLiteral
Float. Double: ExpressibleByIntergerLiteral  . ExpressibleByFloatLiteral


var a: Bool = false // ExpressibleByBooleanLiteral
var b: Int = 10 // ExpressibleByIntergerLiteral
var s: String = "jack" // ExpressibleByStringLiteral
var d: Dictionary = ["jack": 55] // ExpressibleByArrayLiteral
var o: Optional<Int> = nil // ExpressibleByNilLiteral
```

### 字面量协议应用示例
1.需求:通过给一个true/false值,来初始化一个变量为Int的值
```swift
extension Int: ExpressibleByBooleanLiteral {
    public init(booleanLiteral value: Bool) { 
        self = value ? 1 : 0
    }
}
 
var num: Int = true
print(num) // 1
```

2.需求: 通过一个数组和字典来初始化一个结构体
```swift
struct Point {
    var x = 0.0, y = 0.0
}

var p: Point = [10.5, 20.5]
p = ["x": 11, "y": 22]
```


**有点类似于C++中的转换构造函数**
